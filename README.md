# PDF to Markdown Converter

ä¸€ä¸ªå¼ºå¤§çš„ PDF åˆ° Markdown è½¬æ¢å·¥å…·ï¼ŒåŸºäº React + TypeScript æ„å»ºï¼Œæä¾›ç›´è§‚çš„ Web ç•Œé¢å’Œç²¾ç¡®çš„æ–‡æ¡£ç»“æ„è¯†åˆ«ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- **æ™ºèƒ½ç»“æ„è¯†åˆ«**ï¼šè‡ªåŠ¨æ£€æµ‹æ ‡é¢˜ã€åˆ—è¡¨ã€ä»£ç å—ç­‰æ–‡æ¡£ç»“æ„
- **å¤šçº§æ ‡é¢˜æ”¯æŒ**ï¼šæ”¯æŒ H1-H6 å…­çº§æ ‡é¢˜è‡ªåŠ¨è¯†åˆ«
- **åˆ—è¡¨è¯†åˆ«**ï¼šæ”¯æŒæœ‰åºåˆ—è¡¨å’Œæ— åºåˆ—è¡¨
- **ä»£ç å—æ£€æµ‹**ï¼šè‡ªåŠ¨è¯†åˆ«å’Œæ ¼å¼åŒ–ä»£ç å—
- **ç›®å½•æ£€æµ‹**ï¼šæ™ºèƒ½è¯†åˆ«æ–‡æ¡£ç›®å½•ç»“æ„
- **å®æ—¶é¢„è§ˆ**ï¼šè½¬æ¢è¿‡ç¨‹ä¸­å®æ—¶æ˜¾ç¤ºè¿›åº¦å’Œç»“æœ
- **è°ƒè¯•è§†å›¾**ï¼šæä¾›è¯¦ç»†çš„è½¬æ¢è¿‡ç¨‹è°ƒè¯•ä¿¡æ¯
- **ç°ä»£åŒ– UI**ï¼šç¾è§‚çš„ç”¨æˆ·ç•Œé¢ï¼Œæ”¯æŒæ‹–æ‹½ä¸Šä¼ 

## ğŸ“‹ ç›®å½•

- [å®‰è£…å’Œè¿è¡Œ](#å®‰è£…å’Œè¿è¡Œ)
- [é¡¹ç›®æ¶æ„](#é¡¹ç›®æ¶æ„)
- [å·¥ä½œåŸç†](#å·¥ä½œåŸç†)
- [è½¬æ¢æµç¨‹](#è½¬æ¢æµç¨‹)
- [è½¬æ¢è§„åˆ™](#è½¬æ¢è§„åˆ™)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)

## ğŸ› ï¸ å®‰è£…å’Œè¿è¡Œ

### ç¯å¢ƒè¦æ±‚

- Node.js >= 14.0.0
- npm >= 6.0.0

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¼€å‘æ¨¡å¼

```bash
npm start
```

è®¿é—® http://localhost:8080 æŸ¥çœ‹åº”ç”¨

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

### è¿è¡Œæµ‹è¯•

```bash
npm test
```

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
src/
â”œâ”€â”€ javascript/
â”‚   â”œâ”€â”€ components/          # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ App.tsx         # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ UploadView.tsx  # æ–‡ä»¶ä¸Šä¼ ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ LoadingView.tsx # PDF è§£æè¿›åº¦ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ ResultView.tsx  # è½¬æ¢ç»“æœå±•ç¤º
â”‚   â”‚   â””â”€â”€ DebugView.tsx   # è°ƒè¯•ä¿¡æ¯ç•Œé¢
â”‚   â”œâ”€â”€ models/             # æ ¸å¿ƒæ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ AppState.tsx    # åº”ç”¨çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ Page.tsx        # é¡µé¢æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ TextItem.tsx    # æ–‡æœ¬é¡¹æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ LineItem.tsx    # è¡Œé¡¹æ¨¡å‹
â”‚   â”‚   â””â”€â”€ transformations/ # è½¬æ¢æµæ°´çº¿
â”‚   â””â”€â”€ css/                # æ ·å¼æ–‡ä»¶
â””â”€â”€ index.html              # ä¸»é¡µé¢
```

## ğŸ”„ å·¥ä½œåŸç†

### 1. PDF è§£æé˜¶æ®µ

ä½¿ç”¨ **PDF.js** åº“è§£æ PDF æ–‡ä»¶ï¼š

1. **æ–‡æ¡£è§£æ**ï¼šæå– PDF æ–‡æ¡£ç»“æ„å’Œå…ƒæ•°æ®
2. **é¡µé¢è§£æ**ï¼šé€é¡µæå–æ–‡æœ¬å†…å®¹å’Œä½ç½®ä¿¡æ¯
3. **å­—ä½“è§£æ**ï¼šåˆ†æå­—ä½“ä¿¡æ¯ï¼Œç”¨äºæ–‡æœ¬æ ·å¼è¯†åˆ«
4. **æ–‡æœ¬æå–**ï¼šè·å–æ¯ä¸ªæ–‡æœ¬å—çš„ä½ç½®ã€å¤§å°ã€å­—ä½“ç­‰ä¿¡æ¯

### 2. æ•°æ®æ¨¡å‹è½¬æ¢

å°† PDF åŸå§‹æ•°æ®è½¬æ¢ä¸ºç»“æ„åŒ–æ•°æ®æ¨¡å‹ï¼š

```
PDF åŸå§‹æ•°æ® â†’ TextItem â†’ LineItem â†’ LineItemBlock â†’ Markdown
```

- **TextItem**ï¼šå•ä¸ªæ–‡æœ¬é¡¹ï¼ŒåŒ…å«ä½ç½®ã€å¤§å°ã€å­—ä½“ä¿¡æ¯
- **LineItem**ï¼šæ–‡æœ¬è¡Œï¼Œç”±å¤šä¸ª TextItem ç»„æˆ
- **LineItemBlock**ï¼šæ–‡æœ¬å—ï¼ŒåŒ…å«å®Œæ•´çš„æ®µè½æˆ–ç»“æ„å•å…ƒ

### 3. è½¬æ¢æµæ°´çº¿

åº”ç”¨ä¸€ç³»åˆ—è½¬æ¢è§„åˆ™ï¼Œé€æ­¥è¯†åˆ«å’Œæ ‡è®°æ–‡æ¡£ç»“æ„ï¼š

```
åŸå§‹æ–‡æœ¬ â†’ æ–‡æœ¬æ¸…ç† â†’ ç»“æ„è¯†åˆ« â†’ æ ¼å¼è½¬æ¢ â†’ Markdown è¾“å‡º
```

## ğŸ”„ è½¬æ¢æµç¨‹

### é˜¶æ®µ 1ï¼šæ–‡æœ¬é¢„å¤„ç†

1. **CompactLines**ï¼šåˆå¹¶ç›¸é‚»çš„æ–‡æœ¬è¡Œ
2. **RemoveRepetitiveElements**ï¼šç§»é™¤é‡å¤çš„é¡µé¢å…ƒç´ ï¼ˆå¦‚é¡µçœ‰é¡µè„šï¼‰
3. **VerticalToHorizontal**ï¼šå°†å‚ç›´æ’åˆ—çš„æ–‡æœ¬è½¬æ¢ä¸ºæ°´å¹³æ’åˆ—

### é˜¶æ®µ 2ï¼šç»“æ„è¯†åˆ«

1. **DetectTOC**ï¼šæ£€æµ‹æ–‡æ¡£ç›®å½•ç»“æ„
2. **DetectHeaders**ï¼šè¯†åˆ«æ ‡é¢˜å±‚çº§ï¼ˆH1-H6ï¼‰
3. **DetectListItems**ï¼šè¯†åˆ«åˆ—è¡¨é¡¹ï¼ˆæœ‰åºå’Œæ— åºï¼‰
4. **GatherBlocks**ï¼šå°†ç›¸å…³æ–‡æœ¬é¡¹èšåˆæˆå—
5. **DetectCodeQuoteBlocks**ï¼šè¯†åˆ«ä»£ç å—å’Œå¼•ç”¨å—
6. **DetectListLevels**ï¼šç¡®å®šåˆ—è¡¨çš„åµŒå¥—å±‚çº§

### é˜¶æ®µ 3ï¼šæ ¼å¼è½¬æ¢

1. **ToTextBlocks**ï¼šå°† LineItem è½¬æ¢ä¸ºæ–‡æœ¬å—
2. **ToMarkdown**ï¼šå°†æ–‡æœ¬å—è½¬æ¢ä¸º Markdown æ ¼å¼

## ğŸ“ è½¬æ¢è§„åˆ™

### æ ‡é¢˜è¯†åˆ«è§„åˆ™

#### 1. åŸºäºå­—ä½“å¤§å°çš„è¯†åˆ«

```javascript
// æ ‡é¢˜æ£€æµ‹é€»è¾‘
if (height > mostUsedHeight && !isListItem(text)) {
    // æ ¹æ®å­—ä½“å¤§å°ç¡®å®šæ ‡é¢˜çº§åˆ«
    const headlineLevel = calculateLevel(height);
    item.type = headlineByLevel(headlineLevel);
}
```

**è¯†åˆ«è§„åˆ™**ï¼š
- å­—ä½“å¤§å°å¤§äºæ­£æ–‡å­—ä½“
- ä¸æ˜¯åˆ—è¡¨é¡¹
- æŒ‰å­—ä½“å¤§å°é™åºæ’åˆ—ï¼Œç¡®å®šæ ‡é¢˜çº§åˆ«

#### 2. åŸºäºç›®å½•çš„è¯†åˆ«

å¦‚æœæ£€æµ‹åˆ°ç›®å½•ï¼ˆTOCï¼‰ï¼Œä½¿ç”¨ç›®å½•ä¸­çš„æ ‡é¢˜é«˜åº¦ä½œä¸ºå‚è€ƒï¼š

```javascript
// ä½¿ç”¨ç›®å½•ä¸­çš„æ ‡é¢˜é«˜åº¦èŒƒå›´
headlineTypeToHeightRange[headlineType].max
```

### åˆ—è¡¨è¯†åˆ«è§„åˆ™

#### 1. æ— åºåˆ—è¡¨

**è¯†åˆ«æ¡ä»¶**ï¼š
- ä»¥ `-`ã€`â€¢`ã€`*` ç­‰ç¬¦å·å¼€å¤´
- è‡ªåŠ¨æ ‡å‡†åŒ–ä¸º `-` ç¬¦å·

```javascript
if (isListItemCharacter(item.words[0].string)) {
    item.type = BlockType.LIST;
    // æ ‡å‡†åŒ–ä¸º '-'
    if (item.words[0].string !== '-') {
        item.words[0].string = '-';
    }
}
```

#### 2. æœ‰åºåˆ—è¡¨

**è¯†åˆ«æ¡ä»¶**ï¼š
- ä»¥æ•°å­— + ç‚¹å·å¼€å¤´ï¼ˆå¦‚ "1."ã€"2."ï¼‰
- æ”¯æŒå¤šçº§åµŒå¥—

```javascript
if (isNumberedListItem(text)) {
    item.type = BlockType.LIST;
}
```

### ä»£ç å—è¯†åˆ«è§„åˆ™

**è¯†åˆ«æ¡ä»¶**ï¼š
- ä½¿ç”¨ç­‰å®½å­—ä½“ï¼ˆå¦‚ Courierã€Monacoï¼‰
- æ–‡æœ¬æ ¼å¼ä¸æ­£æ–‡æ˜æ˜¾ä¸åŒ
- å¯èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦æˆ–ç¼©è¿›

```javascript
// ä»£ç å—è½¬æ¢
def('CODE', {
    toText(block) {
        return '```\n' + linesToText(block.items, true) + '\n```';
    }
});
```

### æ®µè½å¤„ç†è§„åˆ™

**é»˜è®¤è§„åˆ™**ï¼š
- æœªè¯†åˆ«çš„æ–‡æœ¬å—ä½œä¸ºæ™®é€šæ®µè½å¤„ç†
- ä¿æŒåŸæœ‰çš„æ¢è¡Œå’Œç©ºæ ¼
- è‡ªåŠ¨å¤„ç†æ®µè½é—´çš„ç©ºè¡Œ

```javascript
def('PARAGRAPH', {
    toText(block) {
        return linesToText(block.items, false);
    }
});
```

## ğŸ¯ è½¬æ¢ç¤ºä¾‹

### è¾“å…¥ PDF ç»“æ„

```
æ ‡é¢˜ï¼šé¡¹ç›®ä»‹ç»
æ­£æ–‡ï¼šè¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®...
- åŠŸèƒ½1
- åŠŸèƒ½2
1. æ­¥éª¤1
2. æ­¥éª¤2
```

### è¾“å‡º Markdown

```markdown
# é¡¹ç›®ä»‹ç»

è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®...

- åŠŸèƒ½1
- åŠŸèƒ½2

1. æ­¥éª¤1
2. æ­¥éª¤2
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æ¡†æ¶
- **React 18**ï¼šç”¨æˆ·ç•Œé¢æ¡†æ¶
- **TypeScript**ï¼šç±»å‹å®‰å…¨çš„ JavaScript
- **React Bootstrap**ï¼šUI ç»„ä»¶åº“

### PDF å¤„ç†
- **PDF.js**ï¼šPDF è§£æå’Œæ¸²æŸ“
- **Remarkable**ï¼šMarkdown è§£æå™¨

### æ„å»ºå·¥å…·
- **Webpack 5**ï¼šæ¨¡å—æ‰“åŒ…å·¥å…·
- **Babel**ï¼šJavaScript ç¼–è¯‘å™¨
- **Jest**ï¼šæµ‹è¯•æ¡†æ¶

### å¼€å‘å·¥å…·
- **ESLint**ï¼šä»£ç è´¨é‡æ£€æŸ¥
- **Prettier**ï¼šä»£ç æ ¼å¼åŒ–
- **React Testing Library**ï¼šç»„ä»¶æµ‹è¯•

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
npm test
```

### è¿è¡Œç‰¹å®šæµ‹è¯•

```bash
npm test -- --testNamePattern="App"
```

### æµ‹è¯•è¦†ç›–ç‡

```bash
npm run test:coverage
```

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„è½¬æ¢è§„åˆ™

1. åœ¨ `src/javascript/models/transformations/` ä¸‹åˆ›å»ºæ–°çš„è½¬æ¢ç±»
2. ç»§æ‰¿ç›¸åº”çš„åŸºç±»ï¼ˆå¦‚ `ToLineItemTransformation`ï¼‰
3. å®ç° `transform` æ–¹æ³•
4. åœ¨ `AppState.tsx` ä¸­æ³¨å†Œæ–°çš„è½¬æ¢è§„åˆ™

### ç¤ºä¾‹ï¼šè‡ªå®šä¹‰è½¬æ¢è§„åˆ™

```javascript
import ToLineItemTransformation from '../ToLineItemTransformation';

export default class CustomTransformation extends ToLineItemTransformation {
    constructor() {
        super("Custom Transformation");
    }

    transform(parseResult) {
        // å®ç°è½¬æ¢é€»è¾‘
        parseResult.pages.forEach(page => {
            page.items.forEach(item => {
                // è‡ªå®šä¹‰å¤„ç†é€»è¾‘
            });
        });
        
        return parseResult;
    }
}
```

### è°ƒè¯•è½¬æ¢è¿‡ç¨‹

1. ä½¿ç”¨ Debug è§†å›¾æŸ¥çœ‹è½¬æ¢è¿‡ç¨‹
2. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—äº†è§£è½¬æ¢è¯¦æƒ…
3. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æ£€æŸ¥æ•°æ®æµ

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“ è”ç³»æ–¹å¼
- é‚®ç®±ï¼š[yhj2433488839@gmail.com]

---

**æ³¨æ„**ï¼šè¿™æ˜¯ä¸€ä¸ªå®éªŒæ€§é¡¹ç›®ï¼Œè½¬æ¢ç»“æœå¯èƒ½å›  PDF æ–‡ä»¶æ ¼å¼è€Œå¼‚ã€‚å»ºè®®åœ¨ä½¿ç”¨å‰æµ‹è¯•æ‚¨çš„å…·ä½“æ–‡æ¡£ã€‚
